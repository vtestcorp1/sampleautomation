"use strict";window.thoughtspot=function(){function g(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}}function h(){var a=document.getElementsByTagName("script"),b=a[a.length-1],c=b.src;if(!c)return console.error("Could not determine Thoughtspot domain from script's url"),"";var d=g(c);return d.host}function i(a,b){return Object.keys(b).forEach(function(c){var d="\\{"+c+"\\}",e=new RegExp(d,"g");a=a.replace(e,b[c])}),a}function j(a,b){return b=encodeURIComponent(b),a+=a.indexOf("#")>=0?b:"#"+b}function k(a,b){var c=document.location.protocol;return"/"!==b[0]&&(b="/"+b),i("{protocol}//{domain}{path}",{protocol:c,domain:a,path:b})}function l(a,b){var d=new XMLHttpRequest;d.withCredentials=!0,d.onreadystatechange=function(){if(!(d.readyState<4)){var a=200===d.status;b(a)}};var e=k(a,c.AUTH_VERIFICATION);d.open("GET",e,!0),d.send()}function m(b){var d=j(window.location.href,a),e=i(c.SSO_LOGIN_TEMPLATE,{targetUrl:encodeURIComponent(d)}),f=k(b,e);window.location.href=f}function n(){return window.location.href.indexOf(a)>=0}function o(){window.location.hash=window.location.hash.replace(a,"")}function p(a){window.addEventListener("message",function(c){var d=c.origin.replace(/^https?:\/\//,"");if(d===a)return c.data&&c.data.type===b.THOUGHTSPOT_AUTH_EXPIRED?void(f&&e.forEach(function(a){a()})):void console.error("ThoughtSpot sent a postMessage with an unexpected event",c)})}function q(a){var b=e.indexOf(a)>=0;b||e.push(a)}function r(a,b,c){if(void 0===c&&(c=d),!c)throw new Error("Invalid configuration, parameter `thoughtspotHost` was not provided and could not be automatically deduced");p(c),q(b),l(c,function(b){return b?(n()&&o(),f=!0,void a(!0)):n()?(o(),f=!0,void a(!1)):void m(c)})}function s(){window.parent.postMessage({type:b.THOUGHTSPOT_AUTH_EXPIRED},"*")}function t(a,b){window.addEventListener("message",function(c){c.origin===a&&b(c)})}var a="5e16222e-ef02-43e9-9fbd-24226bf3ce5b",b={THOUGHTSPOT_AUTH_EXPIRED:"ThoughtspotAuthExpired"},c={AUTH_VERIFICATION:"/callosum/v1/session/info",SSO_LOGIN_TEMPLATE:"/callosum/v1/saml/login?targetURLPath={targetUrl}"},d="",e=[],f=!1;return d=h(),{initialize:r,notifyOnAuthExpiration:s,subscribeToAlerts:t}}();